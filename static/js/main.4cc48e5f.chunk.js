(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{19:function(e,t,a){e.exports=a(31)},25:function(e,t,a){},31:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),l=a(14),o=a.n(l),c=(a(24),a(25),a(15)),i=a(10),u={initial:"initial",loading:"loading",error:"error",ok:"ok"},s={state:u.initial,error:null,json:{},repos:[],tags:{},repo:"none",variant:"all",grep:""},m=function(){return{variants:[],tags:[]}},d=[{name:"All",tag:"all",virtual:!0},{name:"None",tag:"none",virtual:!0},{name:"Node + Legacy Browsers",tag:"node-browsers-legacy"},{name:"Node + Browsers",tag:"node-browsers"},{name:"Legacy Browsers",tag:"browsers-legacy"},{name:"Browsers",tag:"browsers"},{name:"Node",tag:"node"},{name:"PostGIS + RAM",tag:"postgis-ram"},{name:"RAM",tag:"ram"},{name:"PostGIS",tag:"postgis"}],g={init:function(){s.state!==u.ok&&b({state:u.loading});fetch("./dockerhub-info.json").then(function(e){return e.json()}).then(function(e){return function(e){b(Object(i.a)({state:u.ok,json:e},function(e){var t={repos:[],tags:{}};return e.forEach(function(e){var a=e.name,n=e.repo,r=e.tags;t.repos.push({name:a,repo:n}),t.tags[n]=function(e){var t=m(),a=new Set;return t.tags=e.map(function(e){var t=e.name,n=e.size,r=e.updated,l=function(e){return p.find(function(t){return e.includes(t)})}(t);return a.add(l),{tag:t,variant:l,size:n,updated:new Date(r)}}).sort(function(e,t){return t.updated-e.updated}),t.variants=Array.from(a.values()),t}(r)}),t}(e)))}(e)},function(e){return b({state:u.error,error:String(e)})})},selectRepo:function(e){b({repo:e}),b({variant:v(s).variants.includes(s.variant)?s.variant:"all"})},selectVariant:function(e){b({variant:e})},setGrep:function(e){b({grep:e})}};var p=d.map(function(e){return e.tag});var f={repos:function(e){return[{name:"None",repo:"none"}].concat(e.repos)},selectedTags:function(e){return v(e).tags.filter(function(e){var t=e.grep.split(" ");return function(a){var n=a.tag,r=a.variant;return("all"===e.variant||"none"===e.variant&&!r||e.variant===r)&&(!e.grep||t.every(function(e){return n.includes(e)}))}}(e))},relevantVariants:function(e){var t=v(e);return d.filter(function(e){return e.virtual||t.variants.includes(e.tag)})}};function v(e){return e.tags[e.repo]||m()}var E=function(){};function b(e){Object.assign(s,e),E(function(){var e=s.state,t=s.error,a=Object(c.a)(s,["state","error"]);switch(e){case u.initial:case u.loading:return{state:e};case u.error:return{state:e,error:t};case u.ok:return Object(i.a)({state:e},a);default:return{state:u.error,error:"unexpected state"}}}())}var h=a(9),w=a(16),k=a(17),C=a.n(k),y=a(33),S=a(34),j=a(35),N=a(36),I=a(37),O=a(38),z=a(39),B=a(40),R=a(41),M=a(42),V=a(43);function A(e){var t=e.data;switch(t.state){case"initial":return r.a.createElement("p",null,"Preparing");case"loading":return r.a.createElement("p",null,"Loading");case"error":return r.a.createElement("p",null,"Error: ",t.error);case"ok":return r.a.createElement(G,{data:t});default:throw new Error("Unreachable")}}function G(e){var t=e.data;return r.a.createElement(r.a.Fragment,null,r.a.createElement(N.a,{className:"p-3"},r.a.createElement(I.a,null,r.a.createElement(L,{title:"Language",selected:t.repo,options:f.repos(t).map(function(e){return{label:e.name,value:e.repo}}),onSelect:g.selectRepo}),r.a.createElement(L,{title:"Variants",selected:t.variant,options:f.relevantVariants(t).map(function(e){return{label:e.name,value:e.tag}}),onSelect:g.selectVariant}),r.a.createElement(P,{id:"grep",title:"Match",onChange:g.setGrep}))),r.a.createElement(N.a,null,r.a.createElement(x,{repo:t.repo,tags:f.selectedTags(t)})))}function L(e){var t=e.title,a=e.selected,n=e.options,l=e.onClear,o=e.onSelect;return r.a.createElement(O.a,null,r.a.createElement(z.a,null,t),r.a.createElement("div",null,n.map(function(e){var t=e.value,n=e.label;return r.a.createElement(B.a,{key:t,outline:a!==t,color:"info",size:"sm",className:"m-1",onClick:function(){return o(t)}},n)}),l&&r.a.createElement(B.a,{outline:!0,color:"secondary",size:"sm",className:"m-1",onClick:l},"Clear")))}function P(e){var t=e.id,a=e.title,n=e.onChange,l=r.a.useState(""),o=Object(h.a)(l,2),c=o[0],i=o[1],u=Object(w.useDebouncedCallback)(n,200),s=Object(h.a)(u,1)[0];return r.a.useEffect(function(){return s(c)},[c,s]),r.a.createElement(O.a,{className:"mb-2",row:!0},r.a.createElement(z.a,{for:t,sm:2},a),r.a.createElement(R.a,{sm:8},r.a.createElement(M.a,{type:"text",id:t,autoComplete:"off",placeholder:"Space separated keywords to include",value:c,onChange:function(e){return i(e.target.value)}})),r.a.createElement(R.a,{sm:2},r.a.createElement(B.a,{outline:!0,color:"secondary",onClick:function(){return i("")}},"Clear")))}function U(e,t){return["https://github.com/CircleCI-Public/circleci-dockerfiles/blob/master/",encodeURIComponent(e),"/images/",encodeURIComponent(t),"/Dockerfile"].join("")}function x(e){var t=e.repo,a=e.tags;return a.length?r.a.createElement(V.a,{size:"sm"},r.a.createElement("caption",{className:"caption-top"},"Showing ",a.length," tag",1!==a.length&&"s"),r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Image"),r.a.createElement("th",null,"Size"),r.a.createElement("th",null,"Updated"))),r.a.createElement("tbody",null,a.map(function(e){e.language;var a=e.tag,n=e.size,l=e.updated;return r.a.createElement("tr",{key:""+a},r.a.createElement("td",null,r.a.createElement("a",{href:U(t,a),target:"_blank",rel:"noopener noreferrer"},"circleci/",t,":",a)),r.a.createElement("td",null,r.a.createElement(D,{bytes:n})),r.a.createElement("td",null,r.a.createElement(C.a,{date:l,title:l.toISOString()})))}))):r.a.createElement("p",null,"No language selected.")}function D(e){var t=e.bytes;return r.a.createElement("span",null,Math.round(t/1024/1024),"MB")}var F=function(e){var t=e.data;return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{color:"dark",dark:!0},r.a.createElement(S.a,null,r.a.createElement(j.a,{href:"#"},"CircleCI Image Browser"))),r.a.createElement(S.a,null,r.a.createElement(A,{data:t})))};E=function(e){window.dev={data:e,actions:g,selectors:f},o.a.render(r.a.createElement(F,{data:e,actions:g}),document.getElementById("root"))},g.init()}},[[19,1,2]]]);
//# sourceMappingURL=main.4cc48e5f.chunk.js.map