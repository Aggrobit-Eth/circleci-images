{"version":3,"sources":["data.js","App.js","index.js"],"names":["states","initial","loading","error","ok","store","state","json","repos","tags","repo","variant","grep","emptyRepo","variants","name","tag","virtual","actions","init","update","fetch","then","resp","Object","objectSpread","expanded","forEach","_ref","push","Set","map","_ref2","size","updated","variantValues","find","subTag","includes","deriveVariant","add","Date","sort","a","b","Array","from","values","expandRepoTags","expand","updateJson","err","String","selectRepo","repoName","selectedRepo","selectVariant","setGrep","x","selectors","data","concat","selectedTags","filter","greps","split","_ref3","every","relevantVariants","v","handler","updates","assign","rest","objectWithoutProperties","select","Main","react_default","createElement","ImageBrowser","Error","Fragment","Row","className","Form","Picker","title","selected","options","_ref4","label","value","onSelect","_ref5","Textbox","id","onChange","Tags","_ref6","onClear","FormGroup","Label","_ref7","Button","key","outline","color","onClick","_ref8","_React$useState","React","useState","_React$useState2","slicedToArray","setValue","_useDebouncedCallback","useDebouncedCallback","delayedOnChange","useEffect","row","for","sm","Col","Input","type","autoComplete","placeholder","e","target","dockerfileUrl","encodeURIComponent","join","_ref9","length","Table","_ref10","language","href","rel","Megabytes","bytes","react_timeago_lib_default","date","toISOString","_ref11","Math","round","App","Navbar","dark","Container","NavbarBrand","window","dev","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.4cc48e5f.chunk.js","sourcesContent":["/** Data Model **/\n\nconst states = {\n  initial: \"initial\",\n  loading: \"loading\",\n  error: \"error\",\n  ok: \"ok\",\n};\n\nconst store = {\n  state: states.initial,\n  error: null,\n  json: {},\n  repos: [],\n  tags: {}, // repo => Repo\n  repo: \"none\",\n  variant: \"all\",\n  grep: \"\",\n};\n\nconst emptyRepo = () => ({\n  variants: [],\n  tags: [],\n});\n\nconst variants = [\n  { name: \"All\", tag: \"all\", virtual: true },\n  { name: \"None\", tag: \"none\", virtual: true },\n  { name: \"Node + Legacy Browsers\", tag: \"node-browsers-legacy\" },\n  { name: \"Node + Browsers\", tag: \"node-browsers\" },\n  { name: \"Legacy Browsers\", tag: \"browsers-legacy\" },\n  { name: \"Browsers\", tag: \"browsers\" },\n  { name: \"Node\", tag: \"node\" },\n  { name: \"PostGIS + RAM\", tag: \"postgis-ram\" },\n  { name: \"RAM\", tag: \"ram\" },\n  { name: \"PostGIS\", tag: \"postgis\" },\n];\n\n/** State Transitions **/\n\nexport const actions = {\n  init,\n  selectRepo,\n  selectVariant,\n  setGrep,\n};\n\nfunction init() {\n  if (store.state !== states.ok) {\n    update({ state: states.loading });\n  }\n  // TODO: hit prod when CORS is enabled\n  fetch(\"./dockerhub-info.json\")\n    .then(resp => resp.json())\n    .then(\n      json => updateJson(json),\n      err => update({ state: states.error, error: String(err) })\n    );\n}\n\nfunction selectRepo(repoName) {\n  update({ repo: repoName });\n\n  const repo = selectedRepo(store);\n  const variant = repo.variants.includes(store.variant) ? store.variant : \"all\";\n  update({ variant });\n}\n\nfunction selectVariant(variant) {\n  update({ variant: variant });\n}\n\nfunction setGrep(grep) {\n  update({ grep: grep });\n}\n\nfunction updateJson(json) {\n  update({ state: states.ok, json, ...expand(json) });\n}\n\nfunction expand(json) {\n  const expanded = {\n    repos: [],\n    tags: {},\n  };\n\n  json.forEach(({ name, repo, tags }) => {\n    expanded.repos.push({ name, repo });\n\n    expanded.tags[repo] = expandRepoTags(tags);\n  });\n\n  return expanded;\n}\n\nfunction expandRepoTags(tags) {\n  // It would be neat if we could try and parse the various tags\n  // to identify the various flavours of the upstream images\n  // and then use that data to generate the UI filters\n  //\n  // an approach that might work would be to split on `-`, and remove\n  // duplicates - possibly with some extra logic to group together things\n  // that look like version numbers or operating systems\n  const repo = emptyRepo();\n  const variants = new Set();\n\n  repo.tags = tags\n    .map(({ name: tag, size, updated }) => {\n      const variant = deriveVariant(tag);\n      variants.add(variant);\n      return {\n        tag,\n        variant,\n        size,\n        updated: new Date(updated),\n      };\n    })\n    .sort((a, b) => b.updated - a.updated);\n\n  repo.variants = Array.from(variants.values());\n\n  return repo;\n}\n\nconst variantValues = variants.map(x => x.tag);\nfunction deriveVariant(tag) {\n  return variantValues.find(subTag => tag.includes(subTag));\n}\n\n/** Selectors **/\n\nexport const selectors = {\n  repos,\n  selectedTags,\n  relevantVariants,\n};\n\nfunction repos(data) {\n  return [{ name: \"None\", repo: \"none\" }].concat(data.repos);\n}\n\nfunction selectedTags(data) {\n  const repo = selectedRepo(data);\n  return repo.tags.filter(filter(data));\n}\n\nfunction filter(data) {\n  const greps = data.grep.split(\" \");\n  return ({ tag, variant }) =>\n    (data.variant === \"all\" ||\n      (data.variant === \"none\" && !variant) ||\n      data.variant === variant) &&\n    (!data.grep || greps.every(grep => tag.includes(grep)));\n}\n\nfunction relevantVariants(data) {\n  const repo = selectedRepo(data);\n  return variants.filter(v => v.virtual || repo.variants.includes(v.tag));\n}\n\nfunction selectedRepo(data) {\n  return data.tags[data.repo] || emptyRepo();\n}\n\n/** Data Subscriptions **/\n\nlet handler = function() {};\nexport function subscribe(newHandler) {\n  handler = newHandler;\n  actions.init();\n}\nfunction update(updates) {\n  Object.assign(store, updates);\n  handler(select());\n}\nfunction select() {\n  const { state, error, ...rest } = store;\n  switch (state) {\n    case states.initial:\n    case states.loading:\n      return { state };\n    case states.error:\n      return { state, error };\n    case states.ok:\n      return { state, ...rest };\n    default:\n      return { state: states.error, error: \"unexpected state\" };\n  }\n}\n\nif (module.hot) {\n  if (module.hot.data) {\n    console.log(\"applying persisted\");\n    // Restore the old store\n    update(module.hot.data.store);\n    // Rebuild the json expansions\n    updateJson(store.json);\n  }\n  module.hot.dispose(hotData => {\n    hotData.store = store;\n  });\n}\n","import React from \"react\";\n\nimport { useDebouncedCallback } from \"use-debounce\";\nimport TimeAgo from \"react-timeago\";\nimport {\n  Container,\n  Row,\n  Col,\n  Navbar,\n  NavbarBrand,\n  Button,\n  Form,\n  FormGroup,\n  Label,\n  Input,\n  Table,\n} from \"reactstrap\";\n\nimport { actions, selectors } from \"./data\";\n\nfunction App({ data }) {\n  return (\n    <>\n      <Navbar color=\"dark\" dark>\n        <Container>\n          <NavbarBrand href=\"#\">CircleCI Image Browser</NavbarBrand>\n        </Container>\n      </Navbar>\n      <Container>\n        <Main data={data} />\n      </Container>\n    </>\n  );\n}\n\nfunction Main({ data }) {\n  switch (data.state) {\n    case \"initial\":\n      return <p>Preparing</p>;\n    case \"loading\":\n      return <p>Loading</p>;\n    case \"error\":\n      return <p>Error: {data.error}</p>;\n    case \"ok\":\n      return <ImageBrowser data={data} />;\n    default:\n      throw new Error(\"Unreachable\");\n  }\n}\n\nfunction ImageBrowser({ data }) {\n  return (\n    <>\n      <Row className=\"p-3\">\n        <Form>\n          <Picker\n            title=\"Language\"\n            selected={data.repo}\n            options={selectors\n              .repos(data)\n              .map(({ name: label, repo: value }) => ({ label, value }))}\n            onSelect={actions.selectRepo}\n          />\n          <Picker\n            title=\"Variants\"\n            selected={data.variant}\n            options={selectors\n              .relevantVariants(data)\n              .map(({ name: label, tag: value }) => ({ label, value }))}\n            onSelect={actions.selectVariant}\n          />\n          <Textbox id=\"grep\" title=\"Match\" onChange={actions.setGrep} />\n        </Form>\n      </Row>\n      <Row>\n        <Tags repo={data.repo} tags={selectors.selectedTags(data)} />\n      </Row>\n    </>\n  );\n}\n\nfunction Picker({ title, selected, options, onClear, onSelect }) {\n  return (\n    <FormGroup>\n      <Label>{title}</Label>\n      <div>\n        {options.map(({ value, label }) => {\n          return (\n            <Button\n              key={value}\n              outline={selected !== value}\n              color=\"info\"\n              size=\"sm\"\n              className=\"m-1\"\n              onClick={() => onSelect(value)}\n            >\n              {label}\n            </Button>\n          );\n        })}\n        {onClear && (\n          <Button\n            outline\n            color=\"secondary\"\n            size=\"sm\"\n            className=\"m-1\"\n            onClick={onClear}\n          >\n            Clear\n          </Button>\n        )}\n      </div>\n    </FormGroup>\n  );\n}\n\nfunction Textbox({ id, title, onChange }) {\n  const [value, setValue] = React.useState(\"\");\n  const [delayedOnChange] = useDebouncedCallback(onChange, 200);\n  React.useEffect(() => delayedOnChange(value), [value, delayedOnChange]);\n\n  return (\n    <FormGroup className=\"mb-2\" row>\n      <Label for={id} sm={2}>\n        {title}\n      </Label>\n      <Col sm={8}>\n        <Input\n          type=\"text\"\n          id={id}\n          autoComplete=\"off\"\n          placeholder=\"Space separated keywords to include\"\n          value={value}\n          onChange={e => setValue(e.target.value)}\n        />\n      </Col>\n      <Col sm={2}>\n        <Button outline color=\"secondary\" onClick={() => setValue(\"\")}>\n          Clear\n        </Button>\n      </Col>\n    </FormGroup>\n  );\n}\n\nfunction dockerfileUrl(repo, tag) {\n  // Note: this only works for tags we're still building\n  // I'm not sure if we have a way to know which git SHA built a given tag\n  return [\n    \"https://github.com/CircleCI-Public/circleci-dockerfiles/blob/master/\",\n    encodeURIComponent(repo),\n    \"/images/\",\n    encodeURIComponent(tag),\n    \"/Dockerfile\",\n  ].join(\"\");\n}\n\nfunction Tags({ repo, tags }) {\n  if (!tags.length) {\n    return <p>No language selected.</p>;\n  }\n  return (\n    <Table size=\"sm\">\n      <caption className=\"caption-top\">\n        Showing {tags.length} tag{tags.length !== 1 && \"s\"}\n      </caption>\n      <thead>\n        <tr>\n          <th>Image</th>\n          <th>Size</th>\n          <th>Updated</th>\n        </tr>\n      </thead>\n      <tbody>\n        {tags.map(({ language, tag, size, updated }) => (\n          <tr key={\"\" + tag}>\n            <td>\n              <a\n                href={dockerfileUrl(repo, tag)}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n              >\n                circleci/{repo}:{tag}\n              </a>\n            </td>\n            <td>\n              <Megabytes bytes={size} />\n            </td>\n            <td>\n              <TimeAgo date={updated} title={updated.toISOString()} />\n            </td>\n          </tr>\n        ))}\n      </tbody>\n    </Table>\n  );\n}\n\nfunction Megabytes({ bytes }) {\n  return <span>{Math.round(bytes / 1024 / 1024)}MB</span>;\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport \"./index.css\";\n\nimport { subscribe, actions, selectors } from \"./data\";\n\nimport App from \"./App\";\n\nfunction render(data) {\n  window.dev = { data, actions, selectors };\n  ReactDOM.render(\n    <App data={data} actions={actions} />,\n    document.getElementById(\"root\")\n  );\n}\n\nsubscribe(render);\n\nif (module.hot) {\n  module.hot.addStatusHandler(status => {\n    if (status === \"check\") {\n      console.log(\"hot reload started\");\n      console.time(\"hot reload\");\n    } else if (status === \"idle\") {\n      console.timeEnd(\"hot reload\");\n    }\n  });\n  module.hot.accept([\"./data\", \"./App\"], () => {\n    subscribe(render);\n  });\n}\n"],"sourceRoot":""}